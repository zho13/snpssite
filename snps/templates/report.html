{% extends "navigation_base.html" %}
{% block title %}Report{% endblock %}
{% block navcontent %}
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center" style="padding-top:5%">
        <h2 class="section-heading">Your Report</h2>
        <hr class="primary">
      </div>
    </div>
  </div>
  <aside>

  {% for rsid in rsid_map %}

  <div class="card">
    <div class="card-block">
      <h4 class="card-title"><a href="http://www.snpedia.com/index.php/rs{{ rsid }}">rs{{ rsid }}</a></h4>
      {% set genotype = rsid_genotype_map[rsid] %}
      <h6 class="card-subtitle">Your Genotype: {{ genotype }}</h6>
    </div>
    {% for entry in rsid_map[rsid] %}
    <div class="card-block" style="font-size:85%">

      {% if entry.source == 'snpedia' %}
      
      <div class="row">
        <div class="col-lg-9 card-body">
          <h4>Phenotype description: {{ entry.description }}</h4>
        </div>
        <div class="col-lg-3 card-body text-muted" style="text-align:right">
          <b>Snpedia</b>
        </div>
      </div>
      <div class="card-body" style="padding-left:15px">
        {% if entry.magnitude %}
          Magnitude: {{ entry.magnitude }}
        {% endif %}
        {% if entry.magnitude and entry.reupte %} | {% endif %}
        {% if entry.repute %}
          Repute: {{ entry.repute }}
        {% endif %}
      </div>

      {% elif entry.source == 'gwas_catalog' %}

      <div class="row">
        <div class="col-lg-9 card-body">
          <h4>Phenotype name: {{ entry.name }}</h4>
          {% if entry.synonyms %}
            <br>Synonyms: 
            {% for keyword in entry.synonyms %}
            <span class="label label-default" style="display:inline-block; margin-bottom: 5px">{{ keyword }}</span>
            {% endfor %}
          {% endif %}
        </div>
        <div class="col-lg-3 card-body text-muted" style="text-align:right">
          <b>Gwas Catalog</b>
        </div>
      </div>

      <div class="card-body" style="margin-top:0">Selection Criteria: 
        {% if entry.pvalue %}P-Value: {{ entry.pvalue }}{% endif %}
        {% if entry.pvalue and entry.oddsratio %} | {% endif %}
        {% if entry.oddsratio %}Odds Ratio: {{ entry.oddsratio }}{% endif %}
      </div>
      <div class="card-body" style="margin-bottom:0">Source: {{ entry.title }} ({{ entry.journal }})</div><div style="padding-right: 15px; text-align:right"><span class="glyphicon glyphicon-book" aria-hidden="true"></span>
        <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term={{ entry.pmid }}" class="card-link" style="font-size: 80%"> PubMed ID: {{ entry.pmid }}</a></div>

      {% elif entry.source == 'auto' %}

      <div class="row">
        <div class="col-lg-9 card-body">
          {% if entry.simple_phenotype %}
            <h4>Related Keywords: 
            {% for keyword in entry.simple_phenotype %}
            <span class="label label-primary" style="display:inline-block; margin-bottom: 5px">{{ keyword }}</span>
            {% endfor %}</h4>
          {% endif %}
          {% if entry.detailed_phenotype %}
            Detailed Phenotype: <span class="label label-default" style="display:inline-block; margin-bottom: 5px">{{ entry.detailed_phenotype }}</span><br>
          {% endif %}
        </div>
        <div class="col-lg-3 card-body text-muted" style="text-align:right">
          <b>Auto   </b><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
        </div>
      </div>
        <div class="card-body" style="margin-top:0">
          P-Value: {{ entry.pvalue }}
        </div>
        <div class="card-body" style="margin-bottom:0">Source: Fill in entry.title (entry.journal)</div><div style="padding-right: 15px; text-align:right"><span class="glyphicon glyphicon-book" aria-hidden="true"></span>
          <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term={{ entry.pmid }}" class="card-link" style="font-size: 80%"> PubMed ID: {{ entry.pmid }}</a>
        </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  {% endfor %}
  </aside>

  <!-- jQuery first, then Tether, then Bootstrap JS. -->
  <script src="{{ url_for('static',filename='bootstrap-4.0.0-alpha.4/dist/js/bootstrap.min.js') }}" integrity="VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>
  <script src="{{ url_for('static',filename='bootstrap-4.0.0-alpha.4/dist/js/tether.min.js') }}" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>
  <script src="{{ url_for('static',filename='bootstrap-4.0.0-alpha.4/dist/js/jquery.min.js') }}" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>

{% endblock %}